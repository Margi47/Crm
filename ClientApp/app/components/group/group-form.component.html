<div class="col-sm-6">
    <button type="button" (click)="goBack()" class="btn btn-default" *ngIf="!newGroup">Back</button>
    <div *ngIf="model" style="margin-top:20px">
        <form (ngSubmit)="onGroupSubmit()" #groupForm="ngForm" >
            <div *ngIf="!newGroup"><label>Id: {{model.id}}</label></div>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text"
                       class="form-control"
                       id="name"
                       [(ngModel)]="model.name"
                       name="name" #name="ngModel"
                       required minlength="4" maxlength="25"/>
                <div *ngIf="name.errors && (name.dirty || name.touched)"
                     class="alert help-block" style="border-color: red; line-height: 5px">
                    <div [hidden]="!name.errors.required">
                        Name is required
                    </div>
                    <div [hidden]="!name.errors.minlength">
                        Name must be at least 4 characters long.
                    </div>
                    <div [hidden]="!name.errors.maxlength">
                        Name cannot be more than 25 characters long.
                    </div>
                    <div [hidden]="!name.errors.server">
                        <div *ngFor="let x of name.errors.server">{{x}}</div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <input type="text"
                       class="form-control"
                       id="description"
                       [(ngModel)]="model.description"                      
                       name="description" #description="ngModel"
                       maxlength="70">
                <div *ngIf="description.errors && (description.dirty || description.touched)"
                     class="alert help-block" style="border-color: red; line-height: 5px">
                    <div [hidden]="!description.errors.maxlength">
                        Description cannot be more than 70 characters long.
                    </div>
                    <div [hidden]="!description.errors.server">
                        <div *ngFor="let x of description.errors.server">{{x}}</div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="checkbox"
                       [(ngModel)]="model.isActive"
                       name="active">
                <label>Is Active</label>
            </div>
            <button type="submit" [disabled]="!groupForm.form.valid" class="btn btn-default">Save</button>
            <button type="button" (click)="onCancel(); groupForm.reset()" class="btn btn-default" *ngIf="newGroup">Cancel</button>
        </form> 

        <div style="margin-top:20px" *ngIf="model && !newGroup">

            <label>Teachers</label>
            <form *ngIf="addingTeacher" (ngSubmit)="onTeacherAdd()" #groupTeacherForm="ngForm">
                <div class="form-group">
                    <select class="form-control"
                            [(ngModel)]="selectedTeacher"
                            required
                            #teacher="ngModel" name="teacher">
                        <option *ngFor="let teacher of allTeachers" [ngValue]="teacher">{{teacher.name}}</option>
                    </select>
                    <div *ngIf="teacher.errors && (teacher.dirty || teacher.touched)"
                         class="alert help-block" style="border-color: red; line-height: 5px">
                        <div [hidden]="!teacher.errors.required">
                            Select teacher
                        </div>
                    </div>
                </div>
                <button class="btn btn-default" type="submit" [disabled]="!groupTeacherForm.form.valid">Add</button>
            </form>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>
                            <button (click)="addingTeacher = true"
                                    class="btn btn-default"
                                    type="button">
                                Add Teacher
                            </button>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let teacher of model.teachers">
                        <td>{{teacher.id}}</td>
                        <td>{{teacher.name}}</td>
                        <td>
                            <button (click)="showTeacherDetails(teacher.id)"
                                    class="btn btn-default"
                                    type="button">
                                Show Details
                            </button>
                            <button class="btn btn-default"
                                    type="button"
                                    (click)="removeTeacher(teacher.id)">
                                Remove
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div style="margin-top:20px" *ngIf="model && !newGroup">

            <label>Students</label>
            <form *ngIf="addingStudent" (ngSubmit)="addStudent()" #groupStudentForm="ngForm">
                <div class="form-group">
                    <select class="form-control"
                            [(ngModel)]="selectedUser"
                            required
                            #student="ngModel" name="student">
                        <option *ngFor="let user of allUsers" [ngValue]="user">{{user.name}}</option>
                    </select>
                    <div *ngIf="student.errors && (student.dirty || student.touched)"
                         class="alert help-block" style="border-color: red; line-height: 5px">
                        <div [hidden]="!student.errors.required">
                            Select student
                        </div>
                    </div>
                </div>
                <button class="btn btn-default" type="submit" [disabled]="!groupStudentForm.form.valid">Add</button>
            </form>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>
                            <button (click)="addingStudent = true"
                                    class="btn btn-default"
                                    type="button">
                                Add Student
                            </button>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of model.students">
                        <td>{{user.id}}</td>
                        <td>{{user.name}}</td>
                        <td>
                            <button (click)="showStudentDetails(user.id)"
                                    class="btn btn-default"
                                    type="button">
                                Show Details
                            </button>
                            <button (click)="removeStudent(user.id)"
                                    class="btn btn-default"
                                    type="button">
                                Remove Student
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button type="button" (click)="onGroupDelete()" class="btn btn-default" *ngIf="!newGroup">Delete group</button>
        </div>
</div>

